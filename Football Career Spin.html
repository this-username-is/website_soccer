<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Football Career Spin</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Styles -->
    <style>
        body {
            background-color: #0f172a; /* slate-900 fallback */
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: white;
            overflow-x: hidden;
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(71, 85, 105, 0.8);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 116, 139, 1);
        }

        /* Loading & Error Screens */
        #loading-message, #error-log {
            padding: 20px;
            text-align: center;
        }
        #error-log {
            color: #f87171;
            display: none;
            border: 1px solid #7f1d1d;
            background: #450a0a;
            margin: 10px;
            border-radius: 8px;
            text-align: left;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
        }

        /* Wheel Specific Animations */
        .wheel-container {
            filter: drop-shadow(0 0 15px rgba(0,0,0,0.5));
        }
        .pointer {
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3));
            z-index: 10;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root">
        <div id="loading-message">
            <h1 style="font-size: 24px; margin-bottom: 10px;">Lade Spiel...</h1>
            <p style="color: #94a3b8;">Bitte einen Moment warten.</p>
            <br>
            <p style="font-size: 14px; color: #cbd5e1;">
                <strong>Hinweis für iPhone/iPad Nutzer:</strong><br>
                Falls dieser Bildschirm bleibt:<br>
                1. Tippe auf "Teilen" <br>
                2. Wähle "In Browser öffnen" oder "In Dateien sichern" und öffne es von dort. <br>
                Die Vorschau in WhatsApp/Mail blockiert oft das Spiel.
            </p>
        </div>
    </div>

    <!-- Error logging container -->
    <div id="error-log"></div>

    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            const errorDiv = document.getElementById('error-log');
            errorDiv.style.display = 'block';
            errorDiv.innerHTML += `<strong>Fehler:</strong> ${message}\n<small>${source}:${lineno}</small>\n\n`;
            document.getElementById('loading-message').style.display = 'none';
        };

        setTimeout(function() {
            if (!window.React || !window.ReactDOM) {
                const errorDiv = document.getElementById('error-log');
                errorDiv.style.display = 'block';
                errorDiv.innerHTML += "<strong>Verbindungsfehler:</strong> React konnte nicht geladen werden.\n";
            }
        }, 3000);
    </script>

    <script type="text/babel">
        try {
            const { useState, useEffect, useRef, useMemo } = React;

            // --- ICONS ---
            const IconBase = ({ children, size = 24, className = "" }) => (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
            );
            const User = (props) => <IconBase {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
            const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>;
            const ArrowRightLeft = (props) => <IconBase {...props}><path d="m16 3 4 4-4 4"/><path d="M20 7H4"/><path d="m8 21-4-4 4-4"/><path d="M4 17h16"/></IconBase>;
            const Plane = (props) => <IconBase {...props}><path d="M2 12h5"/><path d="M13 12h8"/><path d="M22 2v20"/><path d="M10 12l2-3h5l-2 3 2 3h-5l-2-3"/></IconBase>;
            const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
            const Shield = (props) => <IconBase {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></IconBase>;
            const Zap = (props) => <IconBase {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconBase>;
            const Footprints = (props) => <IconBase {...props}><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 11 3.8 11 8c0 2.85-1.67 5.12-3 7h3c1.33-1.88 3-4.15 3-7 0-4.2 1.63-6 3.5-6 3.01 0 4.47 3.28 4.5 6 .03 2.5-1 3.5-1 5.62V16"/><path d="M8 22v-3"/><path d="M16 22v-3"/></IconBase>;
            const Activity = (props) => <IconBase {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></IconBase>;
            const Target = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></IconBase>;
            const Brain = (props) => <IconBase {...props}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></IconBase>;

            // --- DATA ---
            const LEAGUES = {
              "Bundesliga": ["Bayern München", "BVB", "Leipzig", "Leverkusen", "Stuttgart", "Frankfurt", "Bremen"],
              "Premier League": ["Man City", "Arsenal", "Liverpool", "Man Utd", "Chelsea", "Spurs", "Aston Villa"],
              "La Liga": ["Real Madrid", "Barcelona", "Atletico", "Sevilla", "Valencia", "Sociedad"],
              "Serie A": ["Inter", "Milan", "Juventus", "Napoli", "Roma", "Lazio"],
              "Ligue 1": ["PSG", "Marseille", "Lyon", "Monaco", "Lille"]
            };

            const STAT_EVENTS = [
              { text: "+3 Alle", label: "+3 ALL", color: "#22c55e", effects: { all: 3 } },
              { text: "Verletzt -2", label: "Verletzt", color: "#ef4444", effects: { all: -2 } },
              { text: "+5 Dribbling", label: "+5 DRI", color: "#3b82f6", effects: { dri: 5, pas: 2 } },
              { text: "+5 Schuss", label: "+5 SHO", color: "#eab308", effects: { sho: 5, pos: 3 } },
              { text: "+4 Physis", label: "+4 PHY", color: "#f97316", effects: { pac: 4, phy: 4 } },
              { text: "+5 Defense", label: "+5 DEF", color: "#6366f1", effects: { def: 5, pas: 3 } },
              { text: "-1 Bank", label: "-1 Bank", color: "#94a3b8", effects: { all: -1 } },
              { text: "PRIME +5", label: "PRIME", color: "#a855f7", effects: { all: 5 } },
            ];

            const SUCCESS_EVENTS = [
              { text: "Meister", color: "#eab308" },
              { text: "Pokal", color: "#22c55e" },
              { text: "Abstieg", color: "#ef4444" },
              { text: "CL Sieger", color: "#3b82f6" },
              { text: "Bank", color: "#64748b" },
              { text: "Skandal", color: "#f43f5e" },
              { text: "Mittelfeld", color: "#94a3b8" },
              { text: "Kapitän", color: "#8b5cf6" }
            ];

            const INITIAL_STATS = { pac: 60, sho: 55, pas: 58, dri: 62, def: 40, phy: 50 };

            // --- WHEEL COMPONENT ---
            const Wheel = ({ items, onSpinComplete, spinning, onRequestSpin, title }) => {
                const [rotation, setRotation] = useState(0);
                
                // Trigger Spin Animation when `spinning` prop changes to TRUE
                useEffect(() => {
                    if (spinning) {
                        // Logic: Spin at least 10 times (3600 deg) + random segment for 5 seconds
                        const segmentAngle = 360 / items.length;
                        const randomSegment = Math.floor(Math.random() * items.length);
                        
                        // Add extra rotation to land in middle of segment
                        // We use a large random number of full rotations (10-15) + specific target
                        const extraRotation = (360 - (randomSegment * segmentAngle)) - (segmentAngle / 2); 
                        const totalRotation = 3600 + extraRotation + (Math.floor(Math.random() * 3) * 360); 
                        
                        setRotation(prev => prev + totalRotation);
                        
                        // Wait for CSS animation to finish
                        const timer = setTimeout(() => {
                            onSpinComplete(items[randomSegment]);
                        }, 5000);
                        
                        return () => clearTimeout(timer);
                    }
                }, [spinning, items, onSpinComplete]);

                // Generate Slices
                const slices = items.map((item, i) => {
                    const angle = 360 / items.length;
                    const rotate = i * angle;
                    return (
                        <g key={i} transform={`rotate(${rotate})`}>
                            <path 
                                d={`M0,0 L100,0 A100,100 0 0,1 ${100 * Math.cos(angle * Math.PI / 180)},${100 * Math.sin(angle * Math.PI / 180)} Z`} 
                                fill={item.color || (i % 2 === 0 ? '#1e293b' : '#334155')}
                                stroke="#0f172a"
                                strokeWidth="1"
                            />
                            <text 
                                x="60" y="4" 
                                fill="white" fontSize="7" fontWeight="bold" textAnchor="middle"
                                transform={`rotate(${angle/2})`}
                            >
                                {item.label || item.text || item}
                            </text>
                        </g>
                    );
                });

                return (
                    <div className="flex flex-col items-center fade-in">
                        <h3 className="text-xl font-bold text-yellow-400 mb-4 uppercase tracking-wider">{title}</h3>
                        
                        <div className="relative w-64 h-64 md:w-80 md:h-80 wheel-container">
                            {/* Pointer */}
                            <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-20 pointer">
                                <div className="w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-t-[30px] border-t-red-600 drop-shadow-lg"></div>
                            </div>

                            {/* Wheel SVG */}
                            <div 
                                style={{ 
                                    transform: `rotate(${rotation}deg)`,
                                    transition: spinning ? 'transform 5s cubic-bezier(0.1, 0, 0.2, 1)' : 'none'
                                }}
                                className="w-full h-full rounded-full overflow-hidden border-4 border-slate-700 bg-slate-800 shadow-2xl"
                            >
                                <svg viewBox="-5 -5 210 210" className="w-full h-full transform -rotate-90">
                                    <g transform="translate(100,100)">
                                        {slices}
                                    </g>
                                    {/* Center Hub */}
                                    <circle cx="100" cy="100" r="15" fill="#0f172a" stroke="#cbd5e1" strokeWidth="2" />
                                    <circle cx="100" cy="100" r="5" fill="#fbbf24" />
                                </svg>
                            </div>
                        </div>

                        {!spinning && (
                            <button 
                                onClick={onRequestSpin}
                                className="mt-8 bg-yellow-500 hover:bg-yellow-400 text-black font-black py-3 px-12 rounded-full text-xl shadow-[0_0_20px_rgba(234,179,8,0.5)] transform hover:scale-105 transition-all animate-bounce"
                            >
                                SPIN!
                            </button>
                        )}
                        {spinning && (
                             <div className="mt-8 text-slate-400 text-sm animate-pulse font-mono">
                                Dreht...
                             </div>
                        )}
                    </div>
                );
            };

            // --- HELPER COMPONENTS ---
            const CardStat = ({ label, value, icon: Icon }) => (
              <div className="flex items-center space-x-1 justify-between w-full px-1">
                <div className="flex items-center space-x-1 text-xs uppercase opacity-80 font-bold">
                  {Icon && <Icon size={10} />}
                  <span>{label}</span>
                </div>
                <span className={`font-bold text-lg ${value >= 90 ? 'text-green-300' : value < 50 ? 'text-red-300' : 'text-white'}`}>
                  {value}
                </span>
              </div>
            );

            const PlayerCard = ({ player, className = "" }) => {
              const statsArr = Object.values(player.stats);
              const avg = Math.round(statsArr.reduce((a, b) => a + b, 0) / statsArr.length);
              const overall = Math.min(99, Math.max(1, avg)); 

              let bgClass = "bg-gradient-to-b from-yellow-700 to-yellow-900 border-yellow-600";
              if (overall >= 75) bgClass = "bg-gradient-to-b from-gray-300 to-gray-500 border-gray-400";
              if (overall >= 80) bgClass = "bg-gradient-to-b from-yellow-400 to-yellow-600 border-yellow-300";
              if (overall >= 90) bgClass = "bg-gradient-to-b from-blue-400 to-purple-600 border-blue-300 shadow-[0_0_20px_rgba(59,130,246,0.6)]";

              return (
                <div className={`relative w-64 h-96 rounded-t-3xl rounded-b-lg border-4 shadow-2xl flex flex-col items-center text-white select-none transition-all duration-500 transform ${className} ${bgClass}`}>
                  <div className="absolute top-4 left-4 flex flex-col items-center">
                    <span className="text-4xl font-extrabold leading-none drop-shadow-md">{overall}</span>
                    <span className="text-sm font-bold uppercase">{player.position}</span>
                    <div className="mt-2 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-[8px] text-center overflow-hidden font-bold">
                         {player.club ? player.club.substring(0, 3).toUpperCase() : 'FA'}
                    </div>
                  </div>
                  <div className="mt-8 w-32 h-32 relative">
                     <div className="absolute inset-0 bg-black/30 rounded-full filter blur-xl"></div>
                     <User size={128} className="text-black/40 drop-shadow-xl relative z-10" />
                  </div>
                  <div className="mt-2 w-full text-center px-2">
                    <h2 className="text-2xl font-bold uppercase tracking-wide truncate drop-shadow-md border-b border-white/20 pb-1 mb-1 mx-4">
                      {player.name || "Unknown"}
                    </h2>
                  </div>
                  <div className="w-full px-6 grid grid-cols-2 gap-x-4 gap-y-1 mt-1">
                    <CardStat label="PAC" value={player.stats.pac} icon={Zap} />
                    <CardStat label="DRI" value={player.stats.dri} icon={Footprints} />
                    <CardStat label="SHO" value={player.stats.sho} icon={Target} />
                    <CardStat label="DEF" value={player.stats.def} icon={Shield} />
                    <CardStat label="PAS" value={player.stats.pas} icon={Brain} />
                    <CardStat label="PHY" value={player.stats.phy} icon={Activity} />
                  </div>
                </div>
              );
            };

            // --- MAIN GAME ---
            const CareerGame = () => {
              const [gameState, setGameState] = useState('START'); 
              const [phase, setPhase] = useState('IDLE'); 
              const [year, setYear] = useState(1);
              const [history, setHistory] = useState([]);
              const [isSpinning, setIsSpinning] = useState(false);
              const [currentWheelResult, setCurrentWheelResult] = useState(null);
              
              const [playerName, setPlayerName] = useState("Pro Player");
              const [player, setPlayer] = useState({
                name: "Pro Player", position: "ST", club: "Free Agent", league: "None", stats: { ...INITIAL_STATS }
              });

              // --- LOGIC ---
              const startGame = () => {
                setPlayer(prev => ({ ...prev, name: playerName, club: "Jugendakademie", league: "Nachwuchs" }));
                setYear(1);
                setHistory([]);
                setGameState('PLAYING');
                setPhase('READY_FOR_YEAR');
                setCurrentWheelResult(null);
                setIsSpinning(false);
              };

              const updateStats = (effects) => {
                setPlayer(prev => {
                  const newStats = { ...prev.stats };
                  if (effects.all) {
                    Object.keys(newStats).forEach(key => newStats[key] = Math.min(99, Math.max(1, newStats[key] + effects.all)));
                  } else {
                    Object.keys(effects).forEach(key => { if(newStats[key] !== undefined) newStats[key] = Math.min(99, Math.max(1, newStats[key] + effects[key])); });
                  }
                  return { ...prev, stats: newStats };
                });
              };

              // --- ACTIONS ---
              const requestSpin = () => {
                  setIsSpinning(true);
                  setCurrentWheelResult(null);
              };

              const handleSpinComplete = (result) => {
                  // Animation finished, show result
                  setIsSpinning(false);
                  setCurrentWheelResult(result);
              };

              const proceedToNextPhase = () => {
                  // Apply Logic based on current phase and result
                  if (phase === 'SPIN_STATS') {
                      updateStats(currentWheelResult.effects);
                      addToHistory(`Jahr ${year}: ${currentWheelResult.text}`);
                      setPhase('SPIN_SUCCESS');
                  } 
                  else if (phase === 'SPIN_SUCCESS') {
                      addToHistory(`Erfolg: ${currentWheelResult.text}`);
                      setPhase('SPIN_TRANSFER_CHECK');
                  } 
                  else if (phase === 'SPIN_TRANSFER_CHECK') {
                      if (currentWheelResult.text === "WECHSEL") {
                          setPhase('SPIN_LEAGUE');
                      } else {
                          addToHistory(`Bleibt bei ${player.club}`);
                          nextYear();
                          return; // Exit early as we are done with this year
                      }
                  } 
                  else if (phase === 'SPIN_LEAGUE') {
                      // Result was league name
                      // Intermediate state not strictly needed if we just switch wheel
                      setPlayer(p => ({...p, league: currentWheelResult.text}));
                      setPhase('SPIN_CLUB');
                  }
                  else if (phase === 'SPIN_CLUB') {
                      setPlayer(p => ({ ...p, club: currentWheelResult.text }));
                      addToHistory(`Transfer zu ${currentWheelResult.text}`);
                      nextYear();
                      return;
                  }
                  
                  // Reset for next wheel
                  setCurrentWheelResult(null);
              };

              const addToHistory = (text) => setHistory(prev => [text, ...prev]);
              
              const nextYear = () => {
                  setPhase('READY_FOR_YEAR');
                  setYear(y => y + 1);
                  setCurrentWheelResult(null);
                  setIsSpinning(false);
              };

              // --- RENDER ACTION AREA ---
              const renderActionArea = () => {
                // If we have a result and are not spinning, show the Result Card
                if (!isSpinning && currentWheelResult) {
                    return (
                         <div className="text-center fade-in">
                            <h3 className="text-slate-400 mb-2 uppercase tracking-widest text-sm">Ergebnis</h3>
                            <div className="text-3xl font-black text-white mb-6 p-6 bg-slate-800 border-2 border-yellow-500 rounded-xl shadow-[0_0_30px_rgba(234,179,8,0.2)]">
                                {currentWheelResult.text || currentWheelResult}
                            </div>
                            <button 
                                onClick={proceedToNextPhase} 
                                className="bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-12 rounded-full shadow-lg transform hover:scale-105 transition-all"
                            >
                                Weiter
                            </button>
                         </div>
                    );
                }

                // Otherwise show the appropriate Wheel
                switch(phase) {
                  case 'READY_FOR_YEAR':
                    return (
                      <div className="text-center fade-in">
                        <h2 className="text-3xl font-bold text-white mb-2">Saison {year}</h2>
                        <p className="text-slate-400 mb-6">Zeit zu glänzen!</p>
                        <button onClick={() => setPhase('SPIN_STATS')} className="bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 px-12 rounded-full text-xl shadow-lg transform hover:-translate-y-1 transition-all">
                          Jahr Starten
                        </button>
                      </div>
                    );
                  
                  case 'SPIN_STATS':
                    return <Wheel title="Training" items={STAT_EVENTS} spinning={isSpinning} onRequestSpin={requestSpin} onSpinComplete={handleSpinComplete} />;
                  
                  case 'SPIN_SUCCESS':
                    return <Wheel title="Saison Highlight" items={SUCCESS_EVENTS} spinning={isSpinning} onRequestSpin={requestSpin} onSpinComplete={handleSpinComplete} />;
                  
                  case 'SPIN_TRANSFER_CHECK':
                     const transferOptions = [
                         { text: "BLEIBEN", color: "#475569" }, 
                         { text: "WECHSEL", color: "#22c55e" },
                         { text: "BLEIBEN", color: "#475569" },
                         { text: "WECHSEL", color: "#22c55e" }
                     ];
                    return <Wheel title="Transfermarkt" items={transferOptions} spinning={isSpinning} onRequestSpin={requestSpin} onSpinComplete={handleSpinComplete} />;
                  
                  case 'SPIN_LEAGUE':
                    const leagueOptions = Object.keys(LEAGUES).map((l, i) => ({ text: l, color: i%2===0 ? '#3b82f6' : '#2563eb' }));
                    return <Wheel title="Neue Liga" items={leagueOptions} spinning={isSpinning} onRequestSpin={requestSpin} onSpinComplete={handleSpinComplete} />;
                  
                  case 'SPIN_CLUB':
                    const clubOptions = LEAGUES[player.league].map((c, i) => ({ text: c, color: i%2===0 ? '#ef4444' : '#dc2626' }));
                    return <Wheel title={`Verein in ${player.league}`} items={clubOptions} spinning={isSpinning} onRequestSpin={requestSpin} onSpinComplete={handleSpinComplete} />;
                  
                  default:
                    return <div>...</div>;
                }
              };

              if (gameState === 'START') {
                return (
                  <div className="min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-4">
                    <div className="max-w-md w-full bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-700 text-center">
                      <Trophy size={64} className="mx-auto text-yellow-400 mb-6" />
                      <h1 className="text-4xl font-black mb-2 tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500">CAREER SPIN</h1>
                      <div className="mb-6 text-left">
                        <label className="block text-sm font-bold text-slate-300 mb-2">Spielername</label>
                        <input type="text" value={playerName} onChange={(e) => setPlayerName(e.target.value)} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-3 px-4 focus:outline-none focus:border-yellow-500 text-lg font-semibold" placeholder="Name eingeben..." />
                      </div>
                      <button onClick={startGame} className="w-full bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold py-4 rounded-xl text-xl shadow-lg transform active:scale-95 transition-all">Karriere Starten</button>
                    </div>
                  </div>
                );
              }

              return (
                <div className="min-h-screen bg-slate-900 text-white p-2 md:p-8 font-sans overflow-hidden">
                  <div className="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
                    {/* CARD */}
                    <div className="lg:col-span-4 flex justify-center pt-4">
                       <PlayerCard player={player} className="transform scale-90 md:scale-110 origin-top" />
                    </div>
                    
                    {/* GAME AREA - WHEELS */}
                    <div className="lg:col-span-5 flex flex-col items-center min-h-[500px]">
                      <div className="mb-4 bg-slate-800 px-6 py-2 rounded-full border border-slate-600 flex items-center gap-2 shadow-lg">
                        <span className="text-slate-400 text-xs font-bold uppercase">Saison</span>
                        <span className="text-2xl font-black text-white">{year}</span>
                      </div>
                      <div className="w-full flex justify-center items-center flex-1">
                        {renderActionArea()}
                      </div>
                    </div>

                    {/* HISTORY */}
                    <div className="lg:col-span-3 bg-slate-800/50 rounded-2xl border border-slate-700 p-4 h-48 lg:h-auto overflow-y-auto custom-scrollbar">
                      <h3 className="text-slate-400 font-bold uppercase text-xs mb-4 tracking-wider flex items-center gap-2"><Activity size={14} /> Verlauf</h3>
                      <div className="space-y-2">
                        {history.map((item, i) => (
                          <div key={i} className="bg-slate-800 p-2 rounded border-l-4 border-yellow-500 text-xs">{item}</div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              );
            };

            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<CareerGame />);
        } catch (err) {
            document.getElementById('error-log').style.display = 'block';
            document.getElementById('error-log').innerHTML = "Kritischer Fehler: " + err.message;
        }
    </script>
</body>
</html>
